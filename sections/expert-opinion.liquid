{% comment %}
  Expert Opinion Section
  Features an expert's testimonial with photo, quote, name, title, and signature
  Displays in a two-column layout with text on left and image on right
{% endcomment %}

{% stylesheet %}
.expert-opinion {
  width: 100%;
  background-color: var(--section-bg-color);
  padding-top: var(--section-padding-top);
  padding-bottom: var(--section-padding-bottom);
  position: relative;
}

.expert-opinion::before {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  right: 50%;
  margin-left: -50vw;
  margin-right: -50vw;
  width: 100vw;
  height: 100%;
  background: inherit;
  z-index: -1;
}

.expert-opinion__container {
  max-width: var(--container-max-width);
  margin: 0 auto;
  padding: 0 var(--container-padding);
}

.expert-opinion__content {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.5rem;
  align-items: center;
  min-height: auto;
}

.expert-opinion__text {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  padding-right: 0;
}

.expert-opinion__heading {
  font-size: 1.5rem;
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
  margin: 0;
  line-height: var(--line-height-tight);
}

.expert-opinion__title {
  font-size: 1rem;
  color: var(--color-text-secondary);
  margin: 0;
  line-height: var(--line-height-normal);
  font-weight: var(--font-weight-medium);
}

.expert-opinion__quote {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  line-height: var(--line-height-relaxed);
  margin: 1.5rem 0;
  text-align: justify;
}

.expert-opinion__author {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.expert-opinion__name {
  font-size: 1rem;
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin: 0;
}

.expert-opinion__signature {
  max-width: 8rem;
  height: auto;
  margin-top: 0.5rem;
}

.expert-opinion__image-wrapper {
  position: relative;
  width: 100%;
  max-width: 20rem;
  margin: 0 auto 1rem;
  order: -1;
}

.expert-opinion__image {
  width: 100%;
  height: auto;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  object-fit: cover;
  aspect-ratio: 4 / 3;
}

/* Tablet and up */
@media screen and (min-width: 600px) {
  .expert-opinion__content {
    gap: 2rem;
  }
  
  .expert-opinion__heading {
    font-size: 1.75rem;
  }
  
  .expert-opinion__title {
    font-size: 1.125rem;
  }
  
  .expert-opinion__quote {
    font-size: 0.9rem;
    margin: 1.5rem 0;
  }
  
  .expert-opinion__name {
    font-size: 1.125rem;
  }
  
  .expert-opinion__signature {
    max-width: 10rem;
  }
}

/* Desktop and up */
@media screen and (min-width: 769px) {
  .expert-opinion {
    padding-top: var(--section-padding-top-mobile);
    padding-bottom: var(--section-padding-bottom-mobile);
  }
  
  .expert-opinion__content {
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    min-height: 30rem;
  }
  
  .expert-opinion__text {
    padding-right: var(--spacing-xl);
  }
  
  .expert-opinion__image-wrapper {
    max-width: 32rem;
    margin-left: auto;
    order: 0;
  }
  
  .expert-opinion__heading {
    font-size: 2rem;
  }
  
  .expert-opinion__title {
    font-size: 1.125rem;
  }
  
  .expert-opinion__quote {
    font-size: 1rem;
    margin: 2rem 0;
  }
  
  .expert-opinion__name {
    font-size: 1.125rem;
  }
  
  .expert-opinion__signature {
    max-width: 12rem;
  }
}
{% endstylesheet %}

<section class="expert-opinion" style="
  --section-bg-color: {{ section.settings.section_bg_color | default: 'transparent' }};
  --section-padding-top: {{ section.settings.section_padding_top | default: 4 }}rem;
  --section-padding-bottom: {{ section.settings.section_padding_bottom | default: 4 }}rem;
  --section-padding-top-mobile: {{ section.settings.section_padding_top | default: 4 | times: 0.7 }}rem;
  --section-padding-bottom-mobile: {{ section.settings.section_padding_bottom | default: 4 | times: 0.7 }}rem;
  --section-padding-top-small: {{ section.settings.section_padding_top | default: 4 | times: 0.5 }}rem;
  --section-padding-bottom-small: {{ section.settings.section_padding_bottom | default: 4 | times: 0.5 }}rem;
" {{ section.shopify_attributes }}>
  <div class="expert-opinion__container">
    
    <div class="expert-opinion__content">
      
      <!-- Text Content -->
      <div class="expert-opinion__text">
        
        {% if section.settings.heading != blank %}
          <h2 class="expert-opinion__heading">{{ section.settings.heading }}</h2>
        {% endif %}
        
        {% if section.settings.expert_title != blank %}
          <p class="expert-opinion__title">{{ section.settings.expert_title }}</p>
        {% endif %}
        
        {% if section.settings.quote != blank %}
          <blockquote class="expert-opinion__quote">{{ section.settings.quote }}</blockquote>
        {% endif %}
        
        <div class="expert-opinion__author">
          {% if section.settings.expert_name != blank %}
            <p class="expert-opinion__name">{{ section.settings.expert_name }}</p>
          {% endif %}
          
          {% if section.settings.signature_image != blank %}
            {% assign signature_alt = section.settings.signature_alt_text | default: 'Expert signature' %}
            {{ section.settings.signature_image | image_url: width: 300, height: 150 | image_tag: alt: signature_alt, class: 'expert-opinion__signature', loading: 'lazy' }}
          {% endif %}
        </div>
        
      </div>
      
      <!-- Expert Image -->
      {% if section.settings.expert_image != blank %}
        <div class="expert-opinion__image-wrapper">
          {% assign expert_alt = section.settings.expert_alt_text | default: 'Expert photo' %}
          {{ section.settings.expert_image | image_url: width: 600, height: 450 | image_tag: alt: expert_alt, class: 'expert-opinion__image', loading: 'lazy' }}
        </div>
      {% endif %}
      
    </div>
    
  </div>
</section>

{% schema %}
{
  "name": "Expert Opinion",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Main heading",
      "default": "Meet Our Expert,"
    },
    {
      "type": "text",
      "id": "expert_title",
      "label": "Expert title",
      "default": "Culinary Coach & Founder of Katuchef"
    },
    {
      "type": "textarea",
      "id": "quote",
      "label": "Expert quote",
      "default": "With two decades of experience as a master chef in Japanese cuisine, I know the importance of precision and cleanliness in every meal. A dull knife or an unhygienic surface can ruin not just the dish, but the entire experience. Traditional cutting boards just didn't meet my standards. Driven by my commitment to quality, I created the Katuchef cutting board. Made from pure titanium, Katuchef is antibacterial, knife-friendly, and built to last a lifetime, whether you're cooking at home or in a professional kitchen."
    },
    {
      "type": "text",
      "id": "expert_name",
      "label": "Expert name",
      "default": "Mason Carter"
    },
    {
      "type": "header",
      "content": "Images"
    },
    {
      "type": "image_picker",
      "id": "expert_image",
      "label": "Expert photo"
    },
    {
      "type": "text",
      "id": "expert_alt_text",
      "label": "Expert photo alt text",
      "info": "Describe the expert photo for accessibility"
    },
    {
      "type": "image_picker",
      "id": "signature_image",
      "label": "Signature image"
    },
    {
      "type": "text",
      "id": "signature_alt_text",
      "label": "Signature alt text",
      "info": "Describe the signature for accessibility"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "section_bg_color",
      "label": "Section background",
      "default": "transparent"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "label": "Top padding",
      "min": 0,
      "max": 6,
      "step": 0.5,
      "unit": "rem",
      "default": 4
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "label": "Bottom padding",
      "min": 0,
      "max": 6,
      "step": 0.5,
      "unit": "rem",
      "default": 4
    }
  ],
  "presets": [
    {
      "name": "Expert Opinion"
    }
  ]
}
{% endschema %}
